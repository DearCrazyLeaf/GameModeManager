# GameModeManager
This plugin was inspired by the use of the [CS2 Modded Dedicated Server by Kus](https://github.com/kus/cs2-modded-server) and the [CS2 Rock The Vote plugin by Abnerfs](https://github.com/abnerfs/cs2-rockthevote).

## Description
GameModeManager is a simple Counter-Strike 2 server plugin designed to update any maplist.txt file based on the current game mode and/or map group. In addition to enabling the default map cycle, it also provides RTV compatability and allows for any RTV plugin to be used.

## Requirements
- Counter-Strike 2
- Metamod:Source v1282+
- Counter Strike Sharp v.197+

## Installation
1. Install Metamod:Source and Counter Strike Sharp.
2. Copy DLLs to `csgo/addons/counterstrikesharp/plugins/GameModeManager`.
3. Ensure your `gamemodes_server.txt` file contains a list of map groups.
4. Update your custom configuration files for each game mode to include `css_mapgroup <map group>`.

> !WARNING]
> On first load, a configuration file will be created in `csgo/addons/counterstrikesharp/configs/plugins/GameModeManager/GameModeManager.json`.
> Update this file with your desired configuration.

## Commands

- `css_mapgroup` - Sets the current map group.
- `css_modes` - Displays an admin menu with a list of game modes for the server.
- `css_maps` - Displays an admin menu containing the list of maps for the current game mode/map group.

## Configuration
Although the configuration of this simple plugin is quite lengthy, it was designed to provide flexibility for different plugins and server configurations. 

| Config              | Description                                                                                                            | Default Value |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------- | ------------- |
| MapGroup            | Sets the default map group upon server start.                                                                          | mg_casual     | 
| MapGroupsFile       | Default path for the gamemodes_server.txt file used to specify game modes and map groups.                              | /home/steam/cs2/game/csgo/gamemodes_server.txt |
| MapListFile         | Default path for the maplist.txt file that needs to be updated when the map group or game mode changes.                | /home/steam/cs2/game/csgo/addons/counterstrikesharp/plugins/RockTheVote/maplist.txt |
| DefaultMapFormat    | Sets the format for adding maps to the maplist.txt file to the default value (ws:<workshopid>).                        | false |
| RTVEnabled          | If set to enabled, the RTV plugin specified will be reloaded after updating the maplist.txt file.                      | true |
| RTVPlugin           | This is the default path to the RTV Plugin you are using. This can also just be the Module Name.                       | /home/steam/cs2/game/csgo/addons/counterstrikesharp/plugins/RockTheVote/RockTheVote.dll |
| ListEnabled         | When enabled, the Game Mode list specified will be used. Otherwise, the Game Mode list will be generated based on map groups discovered. | true |
| GameModeList        | Allows you to specify the list of game modes for your server.                                                          | See example below |


### Example Configuration File

`// This configuration was automatically generated by CounterStrikeSharp for plugin 'GameModeManager', at 2024/03/21 08:12:06
{
  "MapGroup": "mg_casual",
  "MapGroupsFile": "/home/steam/cs2/game/csgo/gamemodes_server.txt",
  "MapListFile": "/home/steam/cs2/game/csgo/addons/counterstrikesharp/plugins/RockTheVote/maplist.txt",
  "DefaultMapFormat": false,
  "RTVEnabled": true,
  "RTVPlugin": "/home/steam/cs2/game/csgo/addons/counterstrikesharp/plugins/RockTheVote/RockTheVote.dll",
  "ListEnabled": true,
  "GameModeList": [
    "casual",
    "comp",
    "1v1",
    "aim",
    "awp",
    "scoutzknivez",
    "wingman",
    "gungame",
    "surf",
    "dm",
    "dm-multicfg",
    "course",
    "hz",
    "minigames"
  ],
  "ConfigVersion": 1
}`
